Задача:

Создать скрипт на PHP для генерации календаря футбольного чемпионата на один сезон.

Описание: 

В чемпионате участвуют 20 команд, например:
{
  "teams": [
    { "id": 1, "title": "Ливерпуль" },
    { "id": 2, "title": "Челси" },
    { "id": 3, "title": "Тоттенхэм Хотспур" },
    { "id": 4, "title": "Арсенал" },
    { "id": 5, "title": "Манчестер Юнайтед" },
    { "id": 6, "title": "Эвертон" },
    { "id": 7, "title": "Лестер Сити" },
    { "id": 8, "title": "Вест Хэм Юнайтед" },
    { "id": 9, "title": "Уотфорд" },
    { "id": 10, "title": "Борнмут" },
    { "id": 11, "title": "Бернли" },
    { "id": 12, "title": "Саутгемптон" },
    { "id": 13, "title": "Брайтон энд Хоув Альбион" },
    { "id": 14, "title": "Норвич Сити" },
    { "id": 15, "title": "Шеффилд Юнайтед" },
    { "id": 16, "title": "Фулхэм" },
    { "id": 17, "title": "Сток Сити" },
    { "id": 18, "title": "Мидлсбро" },
    { "id": 19, "title": "Суонси Сити" },
    { "id": 20, "title": "Дерби Каунти" }
  ]
}

Правила составления календаря:

1. Формат матчей:
1.1. Каждая команда играет с каждой другой по два раза: один матч дома, один в гостях.
2. Круги и туры:
2.1. Турнир делится на два круга (первый и второй).
2.2. В рамках одного круга каждая пара команд встречается только один раз (например, в первом круге:
Команда А - Команда Б, а во втором: Команда Б - Команда А).
2.3. Каждый круг включает все возможные пары команд, чтобы каждая команда сыграла один матч с каждой другой.
3. Чередование игр по турам:
3.1 Каждый круг делится на туры, в каждом туре участвуют все команды.
3.2. Команды распределяются по парам, каждая играет один матч в туре.
3.3. Необходимо чередовать игры каждой команды от тура к туру.
Допускаются исключения (например, два домашних или два выездных матча подряд).
3.4. При каждом запуске календарь должен генерировать заново,
разбивая команды по матчам по случайному алгоритму. При этом соблюдая все ранее описанные условия.

Требования к реализации:

1. Входные данные:
Скрипт должен принимать на вход JSON (переменной, файлом или по ссылке), содержащий список команд.
Проверка будет проводиться на разных JSON с чётным числом команд.
2. Технологии:
Реализация должна быть на PHP 7.x версии.
3. Вывод:
Результат нужно вывести в удобочитаемом формате, показывающем два круга и разбивку на туры внутри каждого круга.

Пример отображения календаря:

https://football-fun-live.com/tournaments/angliya-premer-liga/calendar
https://www.sports.ru/epl/calendar/
https://www.championat.com/football/_england/tournament/5467/calendar/